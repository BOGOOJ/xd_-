## 桌面虚拟化

姓名：张帅豪		学号：18030100101

[TOC]

#### 1. 技术

- a. 远程桌面

> 远程桌面技术。内置在Windows XP中的远程桌面使用了RDP(Remote Desktop Protocol)协议，使得用户可以从其他的电脑上远程登录、访问与使用目标桌面。RDP协议最早微软用于Windows Server上的Terminal Service(终端服务)的访问协议，实现了Windows Server上的多用户模式，使得用户能够在本地并不安装任何应用的条件下，远程使用服务器上的各种应用。
>
> 这种技术是将目标机上运行界面传输到用户实际的操作机屏幕上，并将键盘，鼠标等一系列的外设输入，传输到目标机，实现交互。终端服务与远程桌面的不同是，前者只操作应用，而后者将拥有整个桌面的控制权。

- b. 桌面操作系统虚拟化

> 这里的这个题目是为了区分服务器虚拟化技术，特别强调桌面操作系统被虚拟。其实这个概念基本可以被等同与Vmware Workstation和微软VPC的方式实现的桌面级的操作系统。当然这种应用模式，主要开发人员和测试人员经常使用的，虽然虚拟的并不一定是XP，2000 professional，vista等桌面系统。这里之所以提倒这个是因为在虚拟化技术刚起步的时候，一些厂商将此定义为桌面虚拟化技术，例如微软在推出MED-v技术之前，都是将VPC定义为微软的桌面虚拟化产品。

等等

#### 2. 多种桌面虚拟化的优缺点

|                          |                             优点                             |                             缺点                             |
| :----------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|     **远程托管桌面**     |         成本低，对数据和应用程序拥有很大的控制程度。         | 性能取决于网络连接的质量；显示协议常常无法处理复杂图形；为桌面设计的一些应用程序无法在服务器上以共享方式运行；对最终用户来说缺乏灵活性，他们无法本地存储数据、使用大多数外设，也无法使用闪存盘来回转移数据。要是连接中断，无法正常工作。 |
|   **远程虚拟应用程序**   |          不要求IT部门控制最终用户的硬件或软件环境。          | 不允许IT部门控制最终用户的硬件或软件环境，这可能会影响性能。要是连接中断，无法正常工作。 |
| **远程托管专用虚拟桌面** | 能够运行共享模式下无法顺利运行的应用程序；可以把每个用户的活动隔离开来，防止资源受到约束。 | 耗用的带宽比共享桌面多得多，服务器上使用的硬件也多得多。性能仍然取决于网络连接的质量和显示协议处理图形的功能。要是连接中断，无法正常工作。 |
|   **本地虚拟应用程序**   | 拥有比远程托管应用程序更多的计算资源，有时候性能更好；耗用的带宽比较少；可以在离线状下使用。 |              IT部门对硬件和数据安全的控制比较弱              |
|   **本地虚拟操作系统**   | 一个系统上可以有多个操作系统；不用担心操作系统的兼容性，能够在智能手机或个人数字助理（PDA）等非传统的虚拟机客户机上运行。 | 潜在的资源冲突；客户机端的虚拟机管理程序相对不够成熟，其安全性有待验证。 |

#### 3. 历史发展

##### 		1. 大型机时代

​		早的大型机出现的时候，价格比较昂贵，并且整个大型机的计算能力也是比较高，那个时候就有人提出，一台机器给多台使用的方法，不过那不是真正意义上的桌面虚拟化，是依赖于系统的多个用户的多任务形态。例如LINUX、UNIX和WINDOWS的服务器版本就可以支持多用户形态。

##### 		2. 第0.5代的桌面虚拟化技术

​		在我们还不知道什么叫桌面虚拟化的时代，这种技术的前身从不同的领域产生，发展直至成熟，使得现在的桌面虚拟化技术成为现实。

##### 		3. 第一代桌面虚拟化技术

​       第一代桌面虚拟化技术，真正意义上将远程桌面的远程访问能力与虚拟操作系统结合了起来，使得桌面虚拟化的企业应用也成为可能。

　　首先，服务器虚拟化技术的成熟，以及服务器计算能力的增强，使得服务器可以提供多台桌面操作系统的计算能力，以当前4核双CPU的志强处理器16G内存服务器举例，如果用户的xp系统分配256M内存，平均水平下，一台服务器可以支撑50-60个桌面运行，则可以看到，如果将桌面集中使用虚拟桌面提供，那么50-60台的桌面采购成本将高于服务器的成本，而管理成本，安全因素，还未被计算在内，所以服务器虚拟化技术的出现，使得桌面虚拟化技术的企业大规模应用成为可能。

　　目前，提供桌面虚拟化解决方案的主要厂商包括微软、Vmware、Citrix，而使用得远程访问协议主要利用两种协议：早期由Citrix开发的，后来被微软购买并集成在Windows中的RDP协议，这种协议被微软和Vmware的桌面虚拟化产品使用，而基于Vmware的Sun Ray等硬件产品，也都是使用RDP协议；第二种就是Citrix自己开发的目前独有的ICA协议，Citrix将这种协议使用到其应用虚拟化产品与桌面虚拟化产品中。

##### 		4. 第二代桌面虚拟化技术

​		第一代技术实现了远程操作和虚拟技术的结合，降低的成本使得虚拟桌面技术的普及称为可能，但是影响普及的并不仅仅是采购成本，管理成本和效率在这个过程中也是非常重要的一环。
　　纵观IT技术应用历史，架构的变化和三国中名言一样：分久必合，合久必分。从最早主机-哑终端集中模式，到PC分布模式，到今天的虚拟桌面模式，其实是一个计算使用权与管理权的博弈发展。开始主机模式，集中管理，但是应用困难，必须到机房去使用；PC时代来临，所有计算都在PC上发生，但是IT的管理也变成分布式的，这也是为什么IT部门的桌面管理员压力最大，需要分布式的管理所有用户的PC，管理的成本也大幅度上升。桌面虚拟化将用户操作环境与系统实际运行环境拆分，不必同时在一个位置，这样即满足了用户的灵活使用，同时帮助IT部门实现了集中的控制，从而解决了这一问题。但是如果只是将1000个员工的pc变成1000个虚拟机，那么IT管理员的管理压力可能并没有降低，反而上升了，只不过是不用四处乱跑了而已。
​		为了提高管理性，第二代桌面虚拟化技术进一步将桌面系统的运行环境与安装环境拆分、应用与桌面的拆分、配置文件的拆分，从而大大降低了管理复杂度与成本，提高了管理效率。

#####				5. 第三代桌面虚拟化技术

​		第一代桌面虚拟化技术，真正意义上将远程桌面的远程访问能力与虚拟操作系统结合了起来，使得桌面虚拟化的企业应用也成为可能。

​		第二代桌面虚拟化技术进一步将桌面系统的运行环境与安装环境拆分、应用与桌面的拆分、配置文件的拆分，从而大大降低了管理复杂度与成本，提高了管理效率。

​		那第三代桌面虚拟化技术则是将二者做了完美的结合，即禹龙云提供的双协议混合云解决方案。在一代远程桌面的远程访问能力与虚拟操作系统结合的基础上做二次虚拟化，通过禹龙云桌面软件平台或是超融合管理平台在一个服务器虚拟资源池平台上创建多个虚拟机用户，不同虚拟机通过两种完全不同的通信协议连接到不同客户端的一种系统和方法。通过禹龙自研的DTP+VDI双协议的灵活运用,有效的解决了在复杂应用场景中用户的不同需求，大大减少了用户设备投入、运维难度。

#### 4. **常见桌面虚拟化产品介绍及特点**

目前业界比较成熟的桌面虚拟化产品有华为桌面云解决方案、Citrix XenDesktop、Vmware View、Microsoft Med-v、Oracle、Redhat企业虚拟化桌面版等。

- 华为桌面云解决方案

> 华为桌面云向用户提供基于互联网的桌面系统租赁服务，用户通过桌面云专用的瘦客户硬终端或者软终端经由互联网来使用和管理自己租用的桌面系统。 桌面云采用集中部署、集中管理、集中维护的模式建设和运营，相对以前分散、独立的桌面系统环境具有显著优点：用户可以按需租用，弹性扩展，无需考虑软硬件维护、升级， 降低整体运营成本；用户数据完全托管在桌面云系统中，数据存储可靠，信息安全无忧；接入互联网即可轻松使用，支持移动办公；集中建设维护，绿色环保，低碳经济。

- Citrix XenDesktop

> XenDesktop可动态按需产生虚拟桌面，用户每次登录时都能获得一个全新桌面，而确保性能不会下降。此外，XenDesktop采用的高速交付协议还可在任何网络条件下提供快速的响应速度。

- Vmware View

> VMware View 以服务托管的形式交付桌面，使桌面管理员将操作系统、应用程序和用户数据与底层的 PC 硬件分离，从而交付革新的桌面。这些组件集中放置在数据中心内，可以得到更高效地托管，同时还可降低成本并增强业务灵活性。

- Microsoft Med-v

> Microsoft Enterprise Desktop Virtualization 是 Microsoft 桌面最佳化套件 (MDOP) 中的一项工具。MDOP 为一套提供给软件保证(Software Assurance) 客戶使用的弹性解決方案，除了可降低应用程式部署成本外，还能以服务形式提供应用程式，及提供更完善的企业桌面环境管理与控制。

- Oracle

> Oracle的综合桌面虚拟化解决方案，从低安全客户设备到高优化虚拟桌面基础设备软件，提供了便捷的管理、安全性及强大的用户访问能力。这些产品的增强特性包括：支持Windows 7虚拟桌面、符合能源之星5.0级法规标准、支持更大的显示器并能提供更高的性能和安全性。

- Redhat

> 红帽(Redhat)企业虚拟化桌面版，整个桌面环境成为托管在中央数据中心服务器上的虚拟桌面。用户使用低成本的瘦客户端或专用的PC连接这些虚拟桌面化。它可为用户提供卓越的体验，以及跨平台的Windows和Linux虚拟桌面支持。

#### 5. **桌面虚拟化面临的问题**

桌面虚拟化虽然可以给我们带来以上各种好处，但桌面虚拟化的实施却不得不面临以下问题：

- 物理机桌面向虚拟桌面迁移过程中，需要预先进行大量前期工作准备，比如用户现有数据如何迁移，用户现有使用习惯如何保留等。这些工作一旦处理不当，将直接影响终端用户的直接体验感觉。
- 桌面虚拟化环境有它自己的难题，包括使用者个性化的独特镜像。假如采用“一次给多台桌面更新补丁”的办法，那么软件宕机的风险就会急剧增加。
- 虽说服务器虚拟化确实能很快收回投资，但是桌面虚拟化一开始的成本却是相当高昂的，很难立刻见到效益，而且也很难确定投资回报率。
- 桌面虚拟化环境需要大量的存储资源，因此如果规划、管理不善，就会浪费大量的资源。
- 由于桌面虚拟化的实现需要网络的支撑，所以对于网络环境的要求就显得尤为重要，虽然千兆以太网已成为数据中心的标准配置，但还没有广泛部署到桌面。